# Implementaci칩n de Botones de Contacto por Categor칤a en Jumpseller

## Introducci칩n
Este documento describe c칩mo implementar botones de contacto por WhatsApp y tel칠fono en Jumpseller, bas치ndose en la categor칤a de los productos. El c칩digo permite asignar n칰meros espec칤ficos a cada categor칤a y una categor칤a prioritaria que tendr치 su propio n칰mero y texto de bot칩n personalizado.

## Funcionalidad
- **Categor칤a Prioritaria:** Si un producto pertenece a esta categor칤a, se mostrar치 su contacto espec칤fico.
- **Categor칤as Generales:** Si el producto no tiene categor칤a prioritaria, se mostrar치 el contacto de la primera categor칤a coincidente.
- **Escalabilidad:** Se pueden agregar m치s categor칤as f치cilmente.
- **Flexibilidad:** Se puede eliminar la categor칤a prioritaria si no es necesaria.

---

## Configuraci칩n JSON
El siguiente c칩digo define las opciones configurables en Jumpseller para asignar n칰meros de contacto a cada categor칤a.

```json
{
  "WhatsApp_Categorias": {
    "icon": "chat",
    "options": {
      "product_whatsapp_priority_category": {
        "name": "Categor칤a Prioritaria",
        "type": "category",
        "default": "SOLICITAR PRESUPUESTO",
        "value_type": "permalink"
      },
      "product_whatsapp_priority_number": {
        "name": "N칰mero WhatsApp Categor칤a Prioritaria",
        "type": "input",
        "default": "573104265599"
      },
      "product_phone_priority_number": {
        "name": "N칰mero Tel칠fono Categor칤a Prioritaria",
        "type": "input",
        "default": "3104265599"
      },
      "product_whatsapp_priority_text": {
        "name": "Texto del bot칩n para Categor칤a Prioritaria",
        "type": "input",
        "default": "Solicitar presupuesto por WhatsApp"
      },
      "product_whatsapp_category_1": {
        "name": "Categor칤a 1",
        "type": "category",
        "default": "Impresoras 3D",
        "value_type": "permalink"
      },
      "product_whatsapp_number_1": {
        "name": "N칰mero WhatsApp Categor칤a 1",
        "type": "input",
        "default": "573028301499"
      },
      "product_phone_number_1": {
        "name": "N칰mero Tel칠fono Categor칤a 1",
        "type": "input",
        "default": "3028301499"
      },
      "product_whatsapp_category_2": {
        "name": "Categor칤a 2",
        "type": "category",
        "default": "Esc치ner 3D",
        "value_type": "permalink"
      },
      "product_whatsapp_number_2": {
        "name": "N칰mero WhatsApp Categor칤a 2",
        "type": "input",
        "default": "573239815754"
      },
      "product_phone_number_2": {
        "name": "N칰mero Tel칠fono Categor칤a 2",
        "type": "input",
        "default": "3239815754"
      }
    }
  }
}
```

---

## C칩digo Liquid
Este c칩digo se encarga de mostrar los botones de contacto en funci칩n de la categor칤a del producto.

```liquid
{% assign priority_category = options.product_whatsapp_priority_category %}
{% assign priority_whatsapp = options.product_whatsapp_priority_number %}
{% assign priority_phone = options.product_phone_priority_number %}
{% assign priority_text = options.product_whatsapp_priority_text %}

{% assign whatsapp_data = "" %}
{% assign button_text = "Comprar por WhatsApp" %}

{% for product_category in product.categories %}
  {% assign product_category_permalink = product_category.url | split: "/" | last %}
  
  {% if product_category_permalink == priority_category %}
    {% assign whatsapp_data = priority_whatsapp | append: "," | append: priority_phone %}
    {% assign button_text = priority_text %}
    {% break %}
  {% endif %}
{% endfor %}

{% if whatsapp_data == "" %}
  {% for i in (1..3) %}
    {% assign category_key = "product_whatsapp_category_" | append: i %}
    {% assign whatsapp_key = "product_whatsapp_number_" | append: i %}
    {% assign phone_key = "product_phone_number_" | append: i %}
    
    {% assign category_permalink = options[category_key] %}
    {% assign whatsapp_number = options[whatsapp_key] %}
    {% assign phone_number = options[phone_key] %}
    
    {% for product_category in product.categories %}
      {% assign product_category_permalink = product_category.url | split: "/" | last %}
      
      {% if product_category_permalink == category_permalink %}
        {% assign whatsapp_data = whatsapp_number | append: "," | append: phone_number %}
        {% break %}
      {% endif %}
    {% endfor %}
    {% if whatsapp_data != "" %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endif %}

{% if whatsapp_data != "" %}
  {% assign whatsapp_details = whatsapp_data | split: "," %}
  <div class="product-btn-comprar-what">
    <a href="https://api.whatsapp.com/send?phone={{ whatsapp_details[0] }}&text={% t 'Hola, me gustar칤a comprar el siguiente producto: ' %} {{ product.name }} | {{ store.base_url }}{{ product.url }}" target="_blank">
      {{ button_text }} <i class="fab fa-whatsapp"></i>
    </a>
  </div>
  <div class="product-btn-comprar-tel">
    <a href="tel:{{ whatsapp_details[1] }}">
      <i class="fas fa-phone"></i> Llamar {{ whatsapp_details[1] }}
    </a>
  </div>
{% endif %}
```

---

## Explicaci칩n del C칩digo Liquid
- **Asignaci칩n de variables:** Se extraen las opciones configuradas en `options`.
- **Verificaci칩n de la categor칤a prioritaria:** Si el producto pertenece a la categor칤a prioritaria, se usan sus datos.
- **B칰squeda en otras categor칤as:** Si no hay coincidencia con la prioritaria, se busca la primera categor칤a coincidente en el bucle.
- **Generaci칩n de botones:** Si se encuentra una coincidencia, se generan los botones de contacto.

---

## Modificaciones y Personalizaci칩n
### **Agregar M치s Categor칤as**
- Agregar m치s entradas en el JSON.
- Aumentar el rango del bucle `{% for i in (1..N) %}` en el c칩digo Liquid.

### **Eliminar la Categor칤a Prioritaria**
- Remover las claves relacionadas en el JSON.
- Eliminar la l칩gica que busca la categor칤a prioritaria en el c칩digo Liquid.

---

Con esta documentaci칩n, cualquier desarrollador con conocimientos b치sicos en Liquid podr치 implementar y personalizar esta funcionalidad en su tienda Jumpseller. 游

